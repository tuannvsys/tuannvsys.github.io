(self["webpackChunkdt"]=self["webpackChunkdt"]||[]).push([[224],{6224:(t,e,a)=>{"use strict";a.r(e),a.d(e,{default:()=>$});var s=a(3673),n=a(2323);const i=(0,s.Wm)("span",null," List seleect date: ",-1);function o(t,e,a,o,h,l){const c=(0,s.up)("DateCustom");return(0,s.wg)(),(0,s.j4)(s.HY,null,[(0,s.Wm)("h1",null,(0,n.zw)(t.title),1),i,((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(t.listDate,(t=>((0,s.wg)(),(0,s.j4)("span",{style:{},key:t},(0,n.zw)(t)+" / ",1)))),128)),(0,s.Wm)(c,{title:t.title,onDateSelect:e[1]||(e[1]=e=>t.setListDateSelect(e,"dateSelect")),date:"30",month:"6",year:"2021",activeDateList:t.listActiveDateInit},null,8,["title","activeDateList"])],64)}a(71);const h=(0,s.HX)("data-v-76340f92");(0,s.dD)("data-v-76340f92");const l=(0,s.Wm)("h2",{style:{"text-align":"center"}}," Date Custom",-1),c={class:"main"},r={class:"controlHeader"},d=(0,s.Wm)("div",{class:"controlHeaderText"},[(0,s.Wm)("span",null," Điểm gửi ")],-1),D={class:"controlHeaderBtn"},u=(0,s.uE)('<div style="clear:both;" data-v-76340f92></div><div class="calHeader" data-v-76340f92><div class="itemHeader" data-v-76340f92><span data-v-76340f92> Mon </span></div><div class="itemHeader" data-v-76340f92><span data-v-76340f92> Tue </span></div><div class="itemHeader" data-v-76340f92><span data-v-76340f92> Wed </span></div><div class="itemHeader" data-v-76340f92><span data-v-76340f92> Thu </span></div><div class="itemHeader" data-v-76340f92><span data-v-76340f92> Fri </span></div><div class="itemHeader" data-v-76340f92><span data-v-76340f92> Sat </span></div><div class="itemHeader" data-v-76340f92><span data-v-76340f92> Sun </span></div></div>',2);(0,s.Cn)();const v=h(((t,e,a,i,o,h)=>((0,s.wg)(),(0,s.j4)(s.HY,null,[l,(0,s.Wm)("div",c,[(0,s.Wm)("div",r,[d,(0,s.Wm)("div",D,[(0,s.Wm)("span",null,(0,n.zw)(t.currentMonthName),1),(0,s.Wm)("button",{class:"btnControl",onClick:e[1]||(e[1]=e=>t.clickControlMonth("-"))}," < "),(0,s.Wm)("span",null,(0,n.zw)(t.blurDate),1),(0,s.Wm)("button",{class:"btnControl",onClick:e[2]||(e[2]=e=>t.clickControlMonth("+"))}," > ")])]),u,(0,s.Wm)("div",{id:"boxId",class:"box",onScroll:e[3]||(e[3]=(...e)=>t.handleScroll&&t.handleScroll(...e)),ref:"boxRef"},[((0,s.wg)(!0),(0,s.j4)(s.HY,null,(0,s.Ko)(t.listDate,(e=>((0,s.wg)(),(0,s.j4)("div",{key:e.day,class:"item",id:e.day+"_"+e.month+"_"+e.year,onMouseover:a=>t.setBlurDate(e.day,e.month,e.year)},[(0,s.Wm)("span",{ref:e.day+"-"+e.month+"-"+e.year,class:e.active+" "+e.activeMonthClass,onClick:a=>t.clickDateAction(e.day,e.month,e.year)},(0,n.zw)(e.day),11,["onClick"])],40,["id","onMouseover"])))),128))],544)])],64))));var m=a(515),y=a.n(m);a(7280);const M=14,g=(0,s.aZ)({name:"DateCustom",props:["date","month","year","activeDateList","title"],data(){return{listDate:[],selectDate:[],beforeDateState:"",nextDateState:"",blurDate:"",currentMonthName:"",checkBlurChangeMonth:"",titleData:"init data title...."}},created(){window.addEventListener("scroll",this.handleScroll)},unmounted(){window.removeEventListener("scroll",this.handleScroll)},mounted(){console.log(">>>>>>>>>>>>>>>>>>>>>>>>>>>>>>> Mounted",this.inputData),this.initApp()},methods:{reset(){Object.assign(this.$data,this.$options.data())},async clickControlMonth(t){console.log(">>>>>> Click Control Month");const[e,a]=this.blurDate.split("-"),s=[...this.selectDate,...this.activeDateList];await this.reset(),this.blurDate=`${e}-${a}`;let n="+"==t?this.getNextMonthYear(Number(e),Number(a))[0]:this.getBeforeMonthYear(Number(e),Number(a))[0],i="+"==t?this.getNextMonthYear(Number(e),Number(a))[1]:this.getBeforeMonthYear(Number(e),Number(a))[1];const o={date:1,month:n,year:i,initSelectData:s};this.initApp(o)},initApp(t){var e,a,s;const n=new Date;this.selectDate=t&&t.month?[...new Set(t.initSelectData)]:[...this.selectDate,...this.activeDateList],e=t&&t.month?t.date:n.getDate(),a=t&&t.month?t.month:n.getMonth()+1,s=t&&t.month?t.year:n.getFullYear(),this.currentMonthName=this.getDateMonth(e,a,s,!1),this.date&&this.month&&this.year&&!t&&(e=Number(this.date),a=Number(this.month),s=Number(this.year)),this.blurDate=`${a}-${s}`,this.listDate=[{day:e,month:a,year:s,active:!0,activeMonthClass:this.calClassActiveMonth(a,s)}];var i=new Date;i.setDate(1),i.setMonth(a-1),i.setFullYear(s);const o=i.getDay()-1,h=this.numDaysInMonth(a,s);var l=[],c=[],r=[];for(let y=1;y<=h;y++)c.push({day:y,month:a,year:s,active:this.selectDate.indexOf(`${y}-${a}-${s}`)>=0?"active":"",activeMonthClass:this.calClassActiveMonth(a,s)});const[d,D]=this.getBeforeMonthYear(a,s);l=this.getListDayEndOfMonth(o,d,D),this.beforeDateState=l[0];const u=4*M-Number(c.length)-Number(l.length);r=this.getListDayStartOfMonth(u,a,s),this.nextDateState=r.slice(-1)[0];const v=[...l,...c,...r];this.listDate=v;const m=[];for(let y=1;y<=this.listDate.length;y++){const t=`${v[y-1]["day"]}-${v[y-1]["month"]}-${v[y-1]["year"]}`,e=this.selectDate.indexOf(t);m.push({day:v[y-1]["day"],month:v[y-1]["month"],year:v[y-1]["year"],active:e>-1?"active":"",activeMonthClass:this.calClassActiveMonth(v[y-1]["month"],v[y-1]["year"])})}this.listDate=m,setTimeout((function(){var t=document.getElementById("boxId");t.scrollTop=66}),10)},setBlurDate(t,e,a){const s=this.$refs.boxRef.getBoundingClientRect().top,n=this.$refs[`${t}-${e}-${a}`].getBoundingClientRect().top,i=this.$refs.boxRef.getBoundingClientRect().left,o=this.$refs[`${t}-${e}-${a}`].getBoundingClientRect().left,h=Math.round((n-s)/33+1),l=(Math.round((o-i-2.5)/50+1),`${e}-${a}`);this.blurDate=l,this.currentMonthName=this.getDateMonth(t,e,a,!1),this.checkBlurChangeMonth||(this.checkBlurChangeMonth=l);var c="";if(1==h||2==h){const s=this.getNextDayWithAnyDay(t,e,a);c=`${s[13].month}-${s[13].year}`}if(5==h||6==h){const s=this.getBeforeDayWithAnyDay(t,e,a);c=`${s[0].month}-${s[0].year}`}if(3!=h&&4!=h||(c=`${e}-${a}`),this.checkBlurChangeMonth!=c){this.checkBlurChangeMonth=l;const t=[];this.listDate.map((e=>{this.checkBlurChangeMonth.split("-")[0];t.push(y()(y()({},e),{},{activeMonthClass:`${e.month}-${e.year}`==c?"activeMonth":"noActiveMonth"}))})),this.listDate=t}},handleScroll({target:{scrollTop:t,clientHeight:e,scrollHeight:a}}){t=Math.ceil(t);const{day:s,month:n,year:i}=this.nextDateState,o=this.beforeDateState.day,h=this.beforeDateState.month,l=this.beforeDateState.year;if(t+e>=a){console.log(">>>>>>> Scroll Button");const t=this.getNextDayWithAnyDay(s,n,i);this.listDate=[...this.listDate,...t],this.nextDateState=t.slice(-1)[0]}if(0==t){console.log(">>>>>>> Scroll Topppp..");const t=this.getBeforeDayWithAnyDay(o,h,l);this.listDate=[...t,...this.listDate],this.beforeDateState=t[0];var c=document.getElementById("boxId");c.scrollTop=1}},clickDateAction(t,e,a){const s=`${t}-${e}-${a}`;this.selectDate||(this.selectDate=[]);const n=this.selectDate.indexOf(s);if(this.listDate.map((s=>{const n=!(!s||!s.day||s.day!=t||s.month!=e||s.year!=a);n&&(s.active=n&&s.active?"":"active")})),-1==n)this.selectDate=[...new Set(this.selectDate),s];else{const t=[];this.selectDate.map((e=>{e!=s&&t.push(e)})),this.selectDate=t}},numDaysInMonth(t,e){return new Date(e,t,0).getDate()},getBeforeMonthYear(t,e){return 1==t?[12,e-1]:[t-1,e]},getNextMonthYear(t,e){return 12==t?[1,e+1]:[t+1,e]},getListDayEndOfMonth(t,e,a){var s=[],n=new Date(a,e,0).getDate(),i=n-t+1-14;for(let o=i;o<=n;o++){const t=this.getBeforeMonthYear(e+1,a)[0],n=this.getBeforeMonthYear(e+1,a)[1];s.push({day:o,month:t,year:n,active:this.selectDate.indexOf(`${o}-${t}-${n}`)>=0?"active":"",activeMonthClass:this.calClassActiveMonth(t,n)})}return s},getListDayStartOfMonth(t,e,a){var s=[];for(let n=1;n<=t+14;n++){const t=this.getNextMonthYear(e,a)[0],i=this.getNextMonthYear(e,a)[1];s.push({day:n,month:t,year:i,active:this.selectDate.indexOf(`${n}-${t}-${i}`)>=0?"active":"",activeMonthClass:this.calClassActiveMonth(t,i)})}return s},getNextDayWithAnyDay(t,e,a){var s=new Date;s.setDate(t),s.setMonth(e-1),s.setFullYear(a);const n=this.numDaysInMonth(e,a),[i,o]=this.getNextMonthYear(e,a);let h=s;h.setDate(h.getDate()+M);const l=h.getDate(),c=h.getMonth()+1,r=(h.getFullYear(),[]);if(c==e&&t!=n)for(let d=t+1;d<=t+M;d++)r.push({day:d,month:e,year:a,active:this.selectDate.indexOf(`${d}-${e}-${a}`)>=0?"active":"",activeMonthClass:this.calClassActiveMonth(e,a)});else{for(let s=t+1;s<=n;s++)r.push({day:s,month:e,year:a,active:this.selectDate.indexOf(`${s}-${e}-${a}`)>=0?"active":"",activeMonthClass:this.calClassActiveMonth(e,a)});for(let t=1;t<=l;t++){let s=this.getNextMonthYear(e,a)[0],n=this.getNextMonthYear(e,a)[1];r.push({day:t,month:s,year:n,active:this.selectDate.indexOf(`${t}-${s}-${n}`)>=0?"active":"",activeMonthClass:this.calClassActiveMonth(s,n)})}}return r},getBeforeDayWithAnyDay(t,e,a){var s=new Date;s.setDate(t),s.setMonth(e-1),s.setFullYear(a);this.numDaysInMonth(e,a);const n=this.numDaysInMonth(this.getBeforeMonthYear(e,a)[0],a),[i,o]=this.getBeforeMonthYear(e,a);let h=s;h.setDate(h.getDate()-M);const l=h.getDate(),c=h.getMonth()+1,r=(h.getFullYear(),[]);if(c==e)for(let d=l;d<t;d++)r.push({day:d,month:e,year:a,active:this.selectDate.indexOf(`${d}-${e}-${a}`)>=0?"active":"",activeMonthClass:this.calClassActiveMonth(e,a)});else{for(let t=l;t<=n;t++){const s=this.getBeforeMonthYear(e,a)[0],n=this.getBeforeMonthYear(e,a)[1];r.push({day:t,month:s,year:n,active:this.selectDate.indexOf(`${t}-${s}-${n}`)>=0?"active":"",activeMonthClass:this.calClassActiveMonth(s,n)})}for(let s=1;s<t;s++)r.push({day:s,month:e,year:a,active:this.selectDate.indexOf(`${s}-${e}-${a}`)>=0?"active":"",activeMonthClass:this.calClassActiveMonth(e,a)})}return r},getDateMonth(t,e,a,s=!0){const n=this.getNameDate(this.getNumDayOnWeek(t,e,a)),i=this.getNameMonth(t,e,a);return s?`${n}, ${i} ${t}`:i},getNumDayOnWeek(t,e,a){t=new Date;return t.setDate(t),t.setMonth(e-1),t.setFullYear(a),t.getDay()-1},getNameDate(t){var e=new Date;return e.toString().split(" ")[0]},getNameMonth(t,e,a){const s=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date;return n.setDate(t),n.setMonth(e-1),n.setFullYear(a),s[n.getMonth()]},getActiveMonth(){return this.blurDate.split("-")[0]},calClassActiveMonth(t,e){const a=this.blurDate,s=`${t}-${e}`;return s==a?"activeMonth":"noActiveMonth"}},watch:{selectDate(t){console.log(">>>>>> watch data >>>>>"),this.$emit("dateSelect",t)}}});g.render=v,g.__scopeId="data-v-76340f92";const f=g,p=(0,s.aZ)({name:"PageIndex",components:{DateCustom:f},data(){return{listActiveDateInit:["26-6-2021","28-6-2021"],listDate:[]}},methods:{setListDateSelect(t,e){this.listDate=t}}});p.render=o;const $=p}}]);